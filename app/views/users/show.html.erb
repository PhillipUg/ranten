<p id="notice"><%= notice %></p>

<div class="columns">
	<div class="column is-three-quarters is-scrollable">
		
		<% if current_user.cover_image.attached? %>
		<%= image_tag(current_user.cover_image, width: 720, height: 240) %>
		<% else %>
		<figure class="image is-3by1">
			<img src="https://bulma.io/images/placeholders/720x240.png" class="avatar">
		</figure>
		<% end %>


		<p class="panel-heading">
			Rants
		</p>

		<div class="container is-fluid">
			<% @user.rants.each do |rant| %>
			<div class="box">
				<article class="media">
					<div class="media-left">
						<% if current_user.photo.attached? %>
						<%= image_tag(current_user.photo, width: 48)  %>
						<% else %>
						<figure class="image is-64x64">
							<img src="https://bulma.io/images/placeholders/64x64.png" class="avatar">
						</figure>
						<% end %>
					</div>
					<div class="media-content">
						<div class="content">
							<strong><%= rant.author.full_name %></strong><br />
							<small><%= rant.author.username %></small><br />
							<p><%= rant.content %></p>
						</div>

						<% if current_user.id == rant.author_id %>
						<nav class="level">
							<div class="level-left is-mobile">
								<%= link_to rant, class: "level-item" do %>
								<span class="icon"><i class="fa fa-link" aria-hidden="true"></i></span>
								<% end %>

								<%= link_to edit_rant_path(rant), class: "level-item" do %>
								<span class="icon"><i class="fa fa-pencil" aria-hidden="true"></i></span>
								<% end %>

								<%= link_to rant, method: :delete, data: { confirm: "Are you sure you want to delete this rant?"} do %>
								<span class="icon"><i class="fa fa-trash-o" aria-hidden="true"></i></span>
								<% end %>
							</div>
						</nav>
						<% end %>
					</div>
				</article>
			</div>
			<% end %>
		</div>

	</div>


	<div class="column">
		<figure class="image is-64x64">
			<img src="https://bulma.io/images/placeholders/64x64.png" class="avatar">
		</figure>
		<p>
			<strong class=""><%= @user.full_name.upcase %></strong><br />
			<% if current_user != @user %>
			<% if @user.users_following.include?(current_user) %>
			<small><%= link_to "Unfollow", user_unfollow_path(@user.id), method: "DELETE", class: "button is-danger" %></small>
			<% else %>
			<small><%= link_to "Follow", user_follow_path(@user.id), method: "POST", class: "button is-info" %></small>
			<% end %>
			<% end %>
		</p>

		<div class="panel-block ">
			<div class="level is-mobile ">
				<div class="level-item has-centered-text">
					<div>
						<p class="heading">Rants</p>
						<p class="title is-6"><%= @user.rants.count %></p>
					</div>
				</div>
				<div class="level-item has-centered-text">
					<div>
						<p class="heading">Following</p>
						<p class="title is-6"><%= @user.followed_users.count %></p>
					</div>
				</div>
				<div class="level-item has-centered-text">
					<div>
						<p class="heading">Followers</p>
						<p class="title is-6"><%= @user.users_following.count %></p>
					</div>
				</div>
			</div>
		</div>


		<nav class="panel">
			<p class="panel-heading">FOLLOWED BY</p>
			<% @users_following.each do |follower| %>
			<%# if follower.id != current_user.id %>
			<div class="panel-block">
				<article class="media">
					<div class="media-left">
						<figure class="image is-32x32">
							<img src="https://bulma.io/images/placeholders/64x64.png" class="avatar">
						</figure>
					</div>
					<div class="media-content">
						<div class="content">
							<p>
								<strong><%= link_to "#{follower.full_name.capitalize}", user_path(follower.id) %></strong><br>
								<small>@<%= follower.username %></small>
							</p>
						</div>
					</div>
				</article>
			</div>
			<%# end %>
			<% end %>
		</nav>


		<nav class="panel">
			<p class="panel-heading">FOLLOWING</p>
			<% @followed_users.each do |following| %>
			<%# if following.id != current_user.id %>
			<div class="panel-block">
				<article class="media">
					<div class="media-left">
						<figure class="image is-32x32">
							<img src="https://bulma.io/images/placeholders/64x64.png" class="avatar">
						</figure>
					</div>
					<div class="media-content">
						<div class="content">
							<p>
								<strong><%= link_to "#{following.full_name.capitalize}", user_path(following.id) %></strong><br>
								<small>@<%= following.username %></small>
							</p>
						</div>
					</div>
				</article>
			</div>
			<%# end %>
			<% end %>
		</nav>

	</div>

</div>

